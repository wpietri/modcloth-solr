<?xml version="1.0" encoding="utf-8" ?>
<config>
  <schemaFactory class="ClassicIndexSchemaFactory"/>
  <luceneMatchVersion>6.1.0</luceneMatchVersion>

  <lib dir="${solr.install.dir:../../../..}/contrib/extraction/lib" regex=".*\.jar" />
  <lib dir="${solr.install.dir:../../../..}/dist/" regex="solr-cell-\d.*\.jar" />

  <lib dir="${solr.install.dir:../../../..}/contrib/clustering/lib/" regex=".*\.jar" />
  <lib dir="${solr.install.dir:../../../..}/dist/" regex="solr-clustering-\d.*\.jar" />

  <lib dir="${solr.install.dir:../../../..}/contrib/langid/lib/" regex=".*\.jar" />
  <lib dir="${solr.install.dir:../../../..}/dist/" regex="solr-langid-\d.*\.jar" />

  <lib dir="${solr.install.dir:../../../..}/contrib/velocity/lib" regex=".*\.jar" />

  <lib path="${solr.install.dir:../../../..}/example/files/browse-resources"/>
  <lib dir="${solr.install.dir:../../../..}/dist/" regex="solr-velocity-\d.*\.jar" />


  <requestHandler name="/select" class="solr.StandardRequestHandler" default="true" />
  <requestHandler name="/update" class="solr.UpdateRequestHandler" />


  <requestHandler name="/replication" class="solr.ReplicationHandler">
    <lst name="master">
      <str name="enable">${enable.master:false}</str>
      <str name="replicateAfter">commit</str>
      <str name="replicateAfter">startup</str>
    </lst>
    <lst name="slave">
      <str name="enable">${enable.replica:false}</str>

      <str name="masterUrl">${replication.url:}</str>
      <str name="pollInterval">00:00:60</str>
    </lst>
  </requestHandler>

<% if @auto_commit and @auto_commit['max_docs'] and @auto_commit['max_time']%>
    <updateHandler class="solr.DirectUpdateHandler2">
    <autoCommit>
      <maxDocs><%= @auto_commit['max_docs'] %></maxDocs>
      <maxTime><%= @auto_commit['max_time'] %></maxTime>
    </autoCommit>
  </updateHandler>
<% end %>

</config>
